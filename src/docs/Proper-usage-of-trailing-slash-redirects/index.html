<!doctype html public "âœ°">
<!--[if lt IE 7 ]> <html lang="en-us" dir="ltr" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en-us" dir="ltr" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en-us" dir="ltr" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en-us" dir="ltr" class="no-js ie9"> <![endif]-->   
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en-us" dir="ltr" class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" >
  <meta charset="utf-8">
  <title>Proper usage of trailing slash redirects | HTML5 Boilerplate - A rock-solid default template for HTML5 awesome.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <link rel="stylesheet" href="/css/style.css" >
  <link rel="stylesheet" href="/css/docs.css" >
  <script src="/js/libs/modernizr-2.0.6.min.js"></script>
</head>
<body>
  <div id="container" class="wikiconvertor"> 
    <div id="header">
         <p class="lang">
           <a href="/">Return to the HTML5 Boilerplate website &#8618;</a>
         </p>
         <h1>HTML5  <i>&#x2605;</i> <b>Boilerplate Docs</b></h1> 
         <h2>A rock-solid default for HTML5 awesome.</h2>
    </div>
    <div id="body" class="docs">
      <div class="wikiconvertor-pages">
        <ul>
                      <li><a href="/docs/960.gs/">960.gs</a></li>
                      <li><a href="/docs/ARIA-in-Boilerplate/">ARIA in Boilerplate</a></li>
                      <li><a href="/docs/Build-script/">Build script</a></li>
                      <li><a href="/docs/Common-Analytics-Augments/">Common Analytics Augments</a></li>
                      <li><a href="/docs/createproject.sh/">createproject.sh</a></li>
                      <li><a href="/docs/crossdomain.xml/">crossdomain.xml</a></li>
                      <li><a href="/docs/DNS-Prefetching/">DNS Prefetching</a></li>
                      <li><a href="/docs/Experimental/">Experimental</a></li>
                      <li><a href="/docs/FAQs/">FAQs</a></li>
                      <li><a href="/docs/Get-Involved/">Get Involved</a></li>
                      <li><a href="/docs/Get-Started!/">Get Started!</a></li>
                      <li><a href="/docs/head-Tips/">head Tips</a></li>
                      <li><a href="/docs/">Home</a></li>
                      <li><a href="/docs/htaccess/">htaccess</a></li>
                      <li><a href="/docs/Internationalization-tips/">Internationalization tips</a></li>
                      <li><a href="/docs/List-of-commonly-installed-fonts-in-different-devices/">List of commonly installed fonts in different devices</a></li>
                      <li><a href="/docs/Make-it-better/">Make it better</a></li>
                      <li><a href="/docs/Mobile-Blogs-and-Articles/">Mobile Blogs and Articles</a></li>
                      <li><a href="/docs/Mobile-References/">Mobile References</a></li>
                      <li><a href="/docs/nginx.conf/">nginx.conf</a></li>
                      <li><a href="/docs/Notes-on-using-png/">Notes on using png</a></li>
                      <li><a href="/docs/Offline/">Offline</a></li>
                      <li><a href="/docs/Patterns-for-writing-better-JavaScript/">Patterns for writing better JavaScript</a></li>
                      <li><a href="/docs/plugins.js-and-script.js/">plugins.js and script.js</a></li>
                      <li><a href="/docs/Proper-usage-of-trailing-slash-redirects/">Proper usage of trailing slash redirects</a></li>
                      <li><a href="/docs/rake/">rake</a></li>
                      <li><a href="/docs/Reference-sheet-for-mobile-platforms/">Reference sheet for mobile platforms</a></li>
                      <li><a href="/docs/Script-Loading-Techniques/">Script Loading Techniques</a></li>
                      <li><a href="/docs/Security/">Security</a></li>
                      <li><a href="/docs/Sites-using-the-boilerplate/">Sites using the boilerplate</a></li>
                      <li><a href="/docs/The-markup/">The markup</a></li>
                      <li><a href="/docs/The-style/">The style</a></li>
                      <li><a href="/docs/Tips-For-Customizing-Boilerplate/">Tips For Customizing Boilerplate</a></li>
                      <li><a href="/docs/Version-Control-with-Cachebusting/">Version Control with Cachebusting</a></li>
                      <li><a href="/docs/web.config/">web.config</a></li>
          </ul>
      </div>
      <div class="wikiconvertor-content wikistyle relative">
        <p class="dwn">
          <span class="right button"><a class="edit-page" href="//github.com/paulirish/html5-boilerplate/wiki/Proper-usage-of-trailing-slash-redirects/_edit">Edit this page</a></span>
        </P>
        <p>Trailing slash redirects can be done by adding one of the options below in .htaccess</p>

<p>Option 1<br />Rewrite "domain.com/foo -> domain.com/foo/"</p>

<pre><code><span class="typ">RewriteCond</span><span class="pln"> </span><span class="pun">%{</span><span class="pln">REQUEST_FILENAME</span><span class="pun">}</span><span class="pln"> </span><span class="pun">!-</span><span class="pln">f<br /></span><span class="typ">RewriteCond</span><span class="pln"> </span><span class="pun">%{</span><span class="pln">REQUEST_URI</span><span class="pun">}</span><span class="pln"> </span><span class="pun">!(\.[</span><span class="pln">a</span><span class="pun">-</span><span class="pln">zA</span><span class="pun">-</span><span class="pln">Z0</span><span class="pun">-</span><span class="lit">9</span><span class="pun">]{</span><span class="lit">1</span><span class="pun">,</span><span class="lit">5</span><span class="pun">}|/|</span><span class="com">#(.*))$</span><span class="pln"><br /></span><span class="typ">RewriteRule</span><span class="pln"> </span><span class="pun">^(.*)</span><span class="pln">$ $1</span><span class="pun">/</span><span class="pln"> </span><span class="pun">[</span><span class="pln">R</span><span class="pun">=</span><span class="lit">301</span><span class="pun">,</span><span class="pln">L</span><span class="pun">]</span><span class="pln"><br /></span></code></pre>

<p>Option 2<br />Rewrite "domain.com/foo/ -> domain.com/foo"</p>

<pre><code><span class="typ">RewriteRule</span><span class="pln"> </span><span class="pun">^(.*)/</span><span class="pln">$ $1 </span><span class="pun">[</span><span class="pln">R</span><span class="pun">=</span><span class="lit">301</span><span class="pun">,</span><span class="pln">L</span><span class="pun">]</span><span class="pln"><br /></span></code></pre>

<p>There has been a lot of cases lately when people copy and paste .htaccess to their existing development environment and gets redirect errors and 404 errors.</p>

<p>Here is a short instruction to show you how to integrate the rewrite rules with different CMS tools. There are 4 areas you need to look out for:</p>

<h3>1. keep a backup</h3>

<p>If you use trailing slash redirects on an existing site, always keep a backup of your htaccess and test thoroughly on your staging server before using it on a production server.</p>

<h3>2. merge not replace your existing rules</h3>

<p>for example, if you use CodeIgniter, you may have existing URL rewrite rules like: </p>

<p><code><br />RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_FILENAME} !-d<br />RewriteRule ^(.*)$ index.php/$1<br /></code></p>

<p>merge the above with H5BP rules below:</p>

<p><code><br />RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/|#(.*))$<br />RewriteRule ^(.*)$ $1/ [R=301,L]<br /></code></p>

<h3>3. be careful of the order</h3>

<p>make sure you test thoroughly in your staging environment, for the above example, the order is add trailing slash first, and add your existing rule after:</p>

<p>```</p>

<h1>this adds trailing slash</h1>

<p>RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_URI} !(.[a-zA-Z0-9]{1,5}|/|#(.<em>))$<br />RewriteRule ^(.</em>)$ $1/ [R=301,L]</p>

<h1>this gets rid of index.php</h1>

<p>RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_FILENAME} !-d<br />RewriteRule ^(.*)$ index.php/$1<br />```</p>

<h3>4. make sure your RewriteBase is correct and above the top of any rewrite rules</h3>

<p>This usually happens to those have WordPress and did auto install. For instance, if you have a site at example.com/blog, your RewriteBase may look like:</p>

<p><code><br />RewriteBase /blog/<br /></code></p>

<p>If you already have a RewriteBase and all along it has been working, keep that RewriteBase and don't remove it. </p>
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <footer id="footer">
      <p>
        <em class="focus">Brought to you by</em>
        <a href="http://paulirish.com"><img width="50" height="50" src="/img/paul-irish.png" alt=""> Paul Irish <i>Google Chrome, jQuery</i></a>
        <a href="http://nimbupani.com"><img width="50" height="50" src="/img/divya-manian.png" alt="">Divya Manian <i>Web Opener @ Opera</i></a>
        <a href="http://www.blog.highub.com/"><img width="50" height="50" src="/img/shichuan.png" alt="">Shichuan <i>Open Web Developer</i></a>
        <a href="http://mathiasbynens.be/"><img width="50" height="50" src="/img/mathias-bynens.png" alt="">Mathias Bynens <i>Freelance front-end web developer</i></a>    
        <a href="http://nicolasgallagher.com/"><img width="50" height="50" src="/img/nicolas-gallagher.png" alt="">Nicolas Gallagher <i>Front-End Web Developer</i></a>                                
      </p> 
      <ul>
        <li><a href="http://blog.mklog.fr/">Mickael Daniel</a></li>
        <li><a href="http://twitter.com/jverrecchia">Jonathan Verrecchia</a></li>
        <li><a href="http://htmlcssjavascript.com/">Rob Larsen</a></li>
        <li><a href="http://mikewest.org/">Mike West</a></li>   
        <li><a href="https://github.com/paulirish/html5-boilerplate/contributors">More Contributors</a></li>
      </ul> <br>
      <p>It would not have been possible without the efforts of these superheroes:</p>
      <ul>
        <li><a href="http://www.phpied.com">Stoyan Stefanov</a></li>
        <li><a href="http://meyerweb.com/">Eric Meyer</a></li>
        <li><a href="http://richclarkdesign.com/">Richard Clark</a></li>
        <li><a href="http://www.aestheticallyloyal.com/">Anthony Kolber</a></li>
        <li><a href="http://www.splintered.co.uk/">Patrick H Lauke</a></li>
        <li><a href="http://timvandamme.com">Tim Van Damme</a></li>
        <li><a href="http://farukat.es/">Faruk Ate&#351;</a></li>
        <li><a href="http://remysharp.com/">Remy Sharp</a></li>
        <li><a href="http://www.dillerdesign.com/">Drew Diller</a></li>
        <li><a href="http://blog.amodernfable.com/">Adam McIntyre</a></li>
        <li><a href="http://tjkdesign.com/">Thierry Koblentz</a></li>
        <li><a href="http://miketaylr.com">Mike Taylor</a></li>
        <li><a href="http://iecss.com">Jonathan Neal</a></li>
        <li><a href="http://camendesign.com">Kroc Camen</a></li>
        <li><a href="http://fontsquirrel.com">Ethan Dunham</a></li>
        <li><a href="http://peter.sh">Peter Beverloo</a></li>         
        <li><a href="http://code.flickr.com/blog/">Flickr</a></li>
        <li><a href="http://www.viget.com/inspire/">Viget</a></li>
        <li><a href="http://stevesouders.com/">Steve Souders</a></li>
        <li><a href="http://stuffandnonsense.co.uk/blog">Andy Clarke</a>
        <li><a href="http://na.isobar.com">Isobar Interface Development team</a></li>
      </ul>
    </footer>
    <img id="html5logo" src="//html5boilerplate.com/img/HTML5_Logo.svg" height="60">
  </div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
  <script>window._ || document.write('<script src="/js/libs/underscore.min.js">\x3C/script>')</script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.5.0/backbone-min.js"></script>
  <script>window.Backbone || document.write('<script src="/js/libs/backbone.min.js">\x3C/script>')</script>
  <script src="/js/docs.js"></script>
  <script>
    (function(exports) {
      // with backbone pushState, we might want to move this in script.js
      // http://docs.disqus.com/help/85/
      var devmode = ( /file/.test(location.protocol) || /(localhost|dropbox)/.test(location.host) ) ? 1 : undefined;
      // todo: edit this with appropriate shortname
      var disqus_shortname = exports.disqus_shortname = 'h5bdocstest';
      // todo: expose href variable
      var disqus_identifier = exports.disqus_identifier = '/docs/Proper-usage-of-trailing-slash-redirects/';
      // todo: change this with something like h5bp.com/docs/docs/Proper-usage-of-trailing-slash-redirects/
      var disqus_url = exports.disqus_url= '/docs/Proper-usage-of-trailing-slash-redirects/';
      var disqus_developer = exports.disqus_developer = devmode;
      var disqus_title = exports.disqus_title = 'h5bp docs comment for /docs/Proper-usage-of-trailing-slash-redirects/';
      // todo: delay comments loading like its done on the website?
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    })(this);
  </script>
</body>
</html>